import{r as s,R as O,s as Q,j as Y,a as W}from"./index.aca28bb5.js";import{c as q}from"./theme.927cb98c.js";import{b as G,$ as J}from"./VisuallyHidden.module.52cbe909.js";import{p as C,$ as K,_ as X,s as w,c as Z,d as S,a as j,m as ee,g as ie,h as ae,S as te,a0 as A,j as re,k as le,i as ne}from"./useFocusRing.module.d7a713a9.js";import{$ as T}from"./useToggleState.module.ff7f3473.js";import{c as D}from"./sharedCheckboxStyles.18544e5c.js";function de(e,i,a){let t=s.exports.useRef(i),n=C(()=>{a&&a(t.current)});s.exports.useEffect(()=>{var r;let o=e==null||(r=e.current)===null||r===void 0?void 0:r.form;return o==null||o.addEventListener("reset",n),()=>{o==null||o.removeEventListener("reset",n)}},[e,n])}const U={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},z={...U,customError:!0,valid:!1},E={isInvalid:!1,validationDetails:U,validationErrors:[]},oe=s.exports.createContext({}),M="__formValidationState"+Date.now();function H(e){if(e[M]){let{realtimeValidation:i,displayValidation:a,updateValidation:t,resetValidation:n,commitValidation:r}=e[M];return{realtimeValidation:i,displayValidation:a,updateValidation:t,resetValidation:n,commitValidation:r}}return se(e)}function se(e){let{isInvalid:i,validationState:a,name:t,value:n,builtinValidation:r,validate:o,validationBehavior:c="aria"}=e;a&&(i||(i=a==="invalid"));let d=i!==void 0?{isInvalid:i,validationErrors:[],validationDetails:z}:null,l=s.exports.useMemo(()=>{if(!o||n==null)return null;let m=ce(o,n);return F(m)},[o,n]);r!=null&&r.validationDetails.valid&&(r=void 0);let u=s.exports.useContext(oe),v=s.exports.useMemo(()=>t?Array.isArray(t)?t.flatMap(m=>_(u[m])):_(u[t]):[],[u,t]),[h,V]=s.exports.useState(u),[f,b]=s.exports.useState(!1);u!==h&&(V(u),b(!1));let $=s.exports.useMemo(()=>F(f?[]:v),[f,v]),y=s.exports.useRef(E),[x,g]=s.exports.useState(E),I=s.exports.useRef(E),R=()=>{if(!p)return;P(!1);let m=l||r||y.current;L(m,I.current)||(I.current=m,g(m))},[p,P]=s.exports.useState(!1);return s.exports.useEffect(R),{realtimeValidation:d||$||l||r||E,displayValidation:c==="native"?d||$||x:d||$||l||r||x,updateValidation(m){c==="aria"&&!L(x,m)?g(m):y.current=m},resetValidation(){let m=E;L(m,I.current)||(I.current=m,g(m)),c==="native"&&P(!1),b(!0)},commitValidation(){c==="native"&&P(!0),b(!0)}}}function _(e){return e?Array.isArray(e)?e:[e]:[]}function ce(e,i){if(typeof e=="function"){let a=e(i);if(a&&typeof a!="boolean")return _(a)}return[]}function F(e){return e.length?{isInvalid:!0,validationErrors:e,validationDetails:z}:null}function L(e,i){return e===i?!0:!!e&&!!i&&e.isInvalid===i.isInvalid&&e.validationErrors.length===i.validationErrors.length&&e.validationErrors.every((a,t)=>a===i.validationErrors[t])&&Object.entries(e.validationDetails).every(([a,t])=>i.validationDetails[a]===t)}function ue(e,i,a){let{validationBehavior:t,focus:n}=e;K(()=>{if(t==="native"&&(a==null?void 0:a.current)&&!a.current.disabled){let d=i.realtimeValidation.isInvalid?i.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";a.current.setCustomValidity(d),a.current.hasAttribute("title")||(a.current.title=""),i.realtimeValidation.isInvalid||i.updateValidation(fe(a.current))}});let r=C(()=>{i.resetValidation()}),o=C(d=>{var l;i.displayValidation.isInvalid||i.commitValidation();let u=a==null||(l=a.current)===null||l===void 0?void 0:l.form;if(!d.defaultPrevented&&a&&u&&be(u)===a.current){var v;n?n():(v=a.current)===null||v===void 0||v.focus(),X("keyboard")}d.preventDefault()}),c=C(()=>{i.commitValidation()});s.exports.useEffect(()=>{let d=a==null?void 0:a.current;if(!d)return;let l=d.form;return d.addEventListener("invalid",o),d.addEventListener("change",c),l==null||l.addEventListener("reset",r),()=>{d.removeEventListener("invalid",o),d.removeEventListener("change",c),l==null||l.removeEventListener("reset",r)}},[a,o,c,r,t])}function ve(e){let i=e.validity;return{badInput:i.badInput,customError:i.customError,patternMismatch:i.patternMismatch,rangeOverflow:i.rangeOverflow,rangeUnderflow:i.rangeUnderflow,stepMismatch:i.stepMismatch,tooLong:i.tooLong,tooShort:i.tooShort,typeMismatch:i.typeMismatch,valueMissing:i.valueMissing,valid:i.valid}}function fe(e){return{isInvalid:!e.validity.valid,validationDetails:ve(e),validationErrors:e.validationMessage?[e.validationMessage]:[]}}function be(e){for(let i=0;i<e.elements.length;i++){let a=e.elements[i];if(!a.validity.valid)return a}return null}function $e(e,i,a){let{isDisabled:t=!1,isReadOnly:n=!1,value:r,name:o,children:c,"aria-label":d,"aria-labelledby":l,validationState:u="valid",isInvalid:v}=e,h=p=>{p.stopPropagation(),i.setSelected(p.target.checked)},V=c!=null,f=d!=null||l!=null,{pressProps:b,isPressed:$}=w({isDisabled:t}),{pressProps:y,isPressed:x}=w({onPress(){var p;i.toggle(),(p=a.current)===null||p===void 0||p.focus()},isDisabled:t||n}),{focusableProps:g}=Z(e,a),I=S(b,g),R=j(e,{labelable:!0});return de(a,i.isSelected,i.setSelected),{labelProps:S(y,{onClick:p=>p.preventDefault()}),inputProps:S(R,{"aria-invalid":v||u==="invalid"||void 0,"aria-errormessage":e["aria-errormessage"],"aria-controls":e["aria-controls"],"aria-readonly":n||void 0,onChange:h,disabled:t,...r==null?{}:{value:r},name:o,type:"checkbox",...I}),isSelected:i.isSelected,isPressed:$||x,isDisabled:t,isReadOnly:n,isInvalid:v||u==="invalid"}}function N(e,i,a){let t=H({...e,value:i.isSelected}),{isInvalid:n,validationErrors:r,validationDetails:o}=t.displayValidation,{labelProps:c,inputProps:d,isSelected:l,isPressed:u,isDisabled:v,isReadOnly:h}=$e({...e,isInvalid:n},i,a);ue(e,t,a);let{isIndeterminate:V,isRequired:f,validationBehavior:b="aria"}=e;s.exports.useEffect(()=>{a.current&&(a.current.indeterminate=!!V)});let{pressProps:$}=w({isDisabled:v||h,onPress(){let{[M]:y}=e,{commitValidation:x}=y||t;x()}});return{labelProps:S(c,$),inputProps:{...d,checked:l,"aria-required":f&&b==="aria"||void 0,required:f&&b==="native"},isSelected:l,isPressed:u,isDisabled:v,isReadOnly:h,isInvalid:n,validationErrors:r,validationDetails:o}}const me=new WeakMap;function pe(e,i,a){const t=T({isReadOnly:e.isReadOnly||i.isReadOnly,isSelected:i.isSelected(e.value),onChange($){$?i.addValue(e.value):i.removeValue(e.value),e.onChange&&e.onChange($)}});let{name:n,descriptionId:r,errorMessageId:o,validationBehavior:c}=me.get(i);var d;c=(d=e.validationBehavior)!==null&&d!==void 0?d:c;let{realtimeValidation:l}=H({...e,value:t.isSelected,name:void 0,validationBehavior:"aria"}),u=s.exports.useRef(E),v=()=>{i.setInvalid(e.value,l.isInvalid?l:u.current)};s.exports.useEffect(v);let h=i.realtimeValidation.isInvalid?i.realtimeValidation:l,V=c==="native"?i.displayValidation:h;var f;let b=N({...e,isReadOnly:e.isReadOnly||i.isReadOnly,isDisabled:e.isDisabled||i.isDisabled,name:e.name||n,isRequired:(f=e.isRequired)!==null&&f!==void 0?f:i.isRequired,validationBehavior:c,[M]:{realtimeValidation:h,displayValidation:V,resetValidation:i.resetValidation,commitValidation:i.commitValidation,updateValidation($){u.current=$,v()}}},t,a);return{...b,inputProps:{...b.inputProps,"aria-describedby":[e["aria-describedby"],i.isInvalid?o:null,r].filter(Boolean).join(" ")||void 0}}}const he=s.exports.createContext(null),Ve=s.exports.createContext(null),ye=s.exports.forwardRef(function(i,a){let{inputRef:t=null,...n}=i;[i,a]=ee(n,a,G);let{validationBehavior:r}=ie(he)||{};var o,c;let d=(c=(o=i.validationBehavior)!==null&&o!==void 0?o:r)!==null&&c!==void 0?c:"native",l=s.exports.useContext(Ve),u=ae(te(t,i.inputRef!==void 0?i.inputRef:null)),{labelProps:v,inputProps:h,isSelected:V,isDisabled:f,isReadOnly:b,isPressed:$,isInvalid:y}=l?pe({...A(i),value:i.value,children:typeof i.children=="function"?!0:i.children},l,u):N({...A(i),children:typeof i.children=="function"?!0:i.children,validationBehavior:d},T(i),u),{isFocused:x,isFocusVisible:g,focusProps:I}=re(),R=f||b,{hoverProps:p,isHovered:P}=le({...i,isDisabled:R}),k=ne({...i,defaultClassName:"react-aria-Checkbox",values:{isSelected:V,isIndeterminate:i.isIndeterminate||!1,isPressed:$,isHovered:P,isFocused:x,isFocusVisible:g,isDisabled:f,isReadOnly:b,isInvalid:y,isRequired:i.isRequired||!1}}),B=j(i);return delete B.id,O.createElement("label",{...S(B,v,p,k),ref:a,slot:i.slot||void 0,"data-selected":V||void 0,"data-indeterminate":i.isIndeterminate||void 0,"data-pressed":$||void 0,"data-hovered":P||void 0,"data-focused":x||void 0,"data-focus-visible":g||void 0,"data-disabled":f||void 0,"data-readonly":b||void 0,"data-invalid":y||void 0,"data-required":i.isRequired||void 0},O.createElement(J,{elementType:"span"},O.createElement("input",{...S(h,I),ref:u})),k.children)}),xe=Q(ye)`
  display: flex;
  align-items: center;
  font-size: 1.6rem;
  font-weight: ${({$bold:e})=>e?700:400};
  color: ${e=>e.isDisabled?q.palette.neutralLight:D[e.$variant].color};

  &[data-disabled] {
    opacity: 0.4;
    cursor: not-allowed;
  }

  span:first-of-type {
    display: none !important;
  }

  [data-slot="selection"] {
    appearance: none;
    width: ${({$size:e})=>e}rem;
    height: ${({$size:e})=>e}rem;
    margin: 0 1.6rem 0 0;
    border-radius: 0.2rem;
    transform: translateY(-0.075em);
    display: grid;
    place-content: center;
    border: ${({$variant:e})=>D[e].unCheckedBorder};
    background-color: ${q.palette.white};

    &::before {
      content: "";
      border-radius: 0.2rem;
      width: ${({$size:e})=>e}rem;
      height: ${({$size:e})=>e}rem;
      border: ${({$variant:e})=>D[e].checkedBorder};
      background-color: ${({$variant:e})=>D[e].backgroundColor};
      background-image: url('${({$variant:e})=>D[e].backgroundImage}');
      background-size: 80%;
      background-position: center;
      background-repeat: no-repeat;
      transform: scale(0);
    }
  }

  &[data-selected] [data-slot="selection"]::before {
    transform: scale(1);
    opacity: ${e=>e.isDisabled?0:1};
  }
`,De=({size:e=1.6,variant:i="primary",bold:a=!1,children:t,...n})=>Y(xe,{...n,$variant:i,$size:e,$bold:a,children:[W("div",{"data-slot":"selection"}),t]});export{De as C};
