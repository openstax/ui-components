import{r as s,R as B,s as N,j as Q,a as z}from"./index.cbfa8774.js";import{c as W,$ as Y}from"./VisuallyHidden.module.4782fcc2.js";import{p as D,o as Z,Z as G,s as L,b as J,c as S,$ as A,l as K,f as X,g as ee,S as ie,_ as q,i as ae,j as te,h as le}from"./useFocusRing.module.e3564eb8.js";import{$ as F}from"./useToggleState.module.1607cf62.js";import{c as re,a as ne,b as de,d as oe}from"./sharedCheckboxStyles.2258f378.js";import{t as se}from"./theme.4163cde7.js";function ce(i,e,a){let t=s.exports.useRef(e),n=D(()=>{a&&a(t.current)});s.exports.useEffect(()=>{var l;let o=i==null||(l=i.current)===null||l===void 0?void 0:l.form;return o==null||o.addEventListener("reset",n),()=>{o==null||o.removeEventListener("reset",n)}},[i,n])}const j={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},T={...j,customError:!0,valid:!1},E={isInvalid:!1,validationDetails:j,validationErrors:[]},ue=s.exports.createContext({}),M="__formValidationState"+Date.now();function U(i){if(i[M]){let{realtimeValidation:e,displayValidation:a,updateValidation:t,resetValidation:n,commitValidation:l}=i[M];return{realtimeValidation:e,displayValidation:a,updateValidation:t,resetValidation:n,commitValidation:l}}return ve(i)}function ve(i){let{isInvalid:e,validationState:a,name:t,value:n,builtinValidation:l,validate:o,validationBehavior:c="aria"}=i;a&&(e||(e=a==="invalid"));let d=e!==void 0?{isInvalid:e,validationErrors:[],validationDetails:T}:null,r=s.exports.useMemo(()=>{if(!o||n==null)return null;let m=fe(o,n);return w(m)},[o,n]);l!=null&&l.validationDetails.valid&&(l=void 0);let u=s.exports.useContext(ue),v=s.exports.useMemo(()=>t?Array.isArray(t)?t.flatMap(m=>_(u[m])):_(u[t]):[],[u,t]),[h,x]=s.exports.useState(u),[f,b]=s.exports.useState(!1);u!==h&&(x(u),b(!1));let $=s.exports.useMemo(()=>w(f?[]:v),[f,v]),V=s.exports.useRef(E),[y,g]=s.exports.useState(E),I=s.exports.useRef(E),R=()=>{if(!p)return;P(!1);let m=r||l||V.current;k(m,I.current)||(I.current=m,g(m))},[p,P]=s.exports.useState(!1);return s.exports.useEffect(R),{realtimeValidation:d||$||r||l||E,displayValidation:c==="native"?d||$||y:d||$||r||l||y,updateValidation(m){c==="aria"&&!k(y,m)?g(m):V.current=m},resetValidation(){let m=E;k(m,I.current)||(I.current=m,g(m)),c==="native"&&P(!1),b(!0)},commitValidation(){c==="native"&&P(!0),b(!0)}}}function _(i){return i?Array.isArray(i)?i:[i]:[]}function fe(i,e){if(typeof i=="function"){let a=i(e);if(a&&typeof a!="boolean")return _(a)}return[]}function w(i){return i.length?{isInvalid:!0,validationErrors:i,validationDetails:T}:null}function k(i,e){return i===e?!0:!!i&&!!e&&i.isInvalid===e.isInvalid&&i.validationErrors.length===e.validationErrors.length&&i.validationErrors.every((a,t)=>a===e.validationErrors[t])&&Object.entries(i.validationDetails).every(([a,t])=>e.validationDetails[a]===t)}function be(i,e,a){let{validationBehavior:t,focus:n}=i;Z(()=>{if(t==="native"&&(a==null?void 0:a.current)&&!a.current.disabled){let d=e.realtimeValidation.isInvalid?e.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";a.current.setCustomValidity(d),a.current.hasAttribute("title")||(a.current.title=""),e.realtimeValidation.isInvalid||e.updateValidation(me(a.current))}});let l=D(()=>{e.resetValidation()}),o=D(d=>{var r;e.displayValidation.isInvalid||e.commitValidation();let u=a==null||(r=a.current)===null||r===void 0?void 0:r.form;if(!d.defaultPrevented&&a&&u&&pe(u)===a.current){var v;n?n():(v=a.current)===null||v===void 0||v.focus(),G("keyboard")}d.preventDefault()}),c=D(()=>{e.commitValidation()});s.exports.useEffect(()=>{let d=a==null?void 0:a.current;if(!d)return;let r=d.form;return d.addEventListener("invalid",o),d.addEventListener("change",c),r==null||r.addEventListener("reset",l),()=>{d.removeEventListener("invalid",o),d.removeEventListener("change",c),r==null||r.removeEventListener("reset",l)}},[a,o,c,l,t])}function $e(i){let e=i.validity;return{badInput:e.badInput,customError:e.customError,patternMismatch:e.patternMismatch,rangeOverflow:e.rangeOverflow,rangeUnderflow:e.rangeUnderflow,stepMismatch:e.stepMismatch,tooLong:e.tooLong,tooShort:e.tooShort,typeMismatch:e.typeMismatch,valueMissing:e.valueMissing,valid:e.valid}}function me(i){return{isInvalid:!i.validity.valid,validationDetails:$e(i),validationErrors:i.validationMessage?[i.validationMessage]:[]}}function pe(i){for(let e=0;e<i.elements.length;e++){let a=i.elements[e];if(!a.validity.valid)return a}return null}function he(i,e,a){let{isDisabled:t=!1,isReadOnly:n=!1,value:l,name:o,children:c,"aria-label":d,"aria-labelledby":r,validationState:u="valid",isInvalid:v}=i,h=p=>{p.stopPropagation(),e.setSelected(p.target.checked)},x=c!=null,f=d!=null||r!=null,{pressProps:b,isPressed:$}=L({isDisabled:t}),{pressProps:V,isPressed:y}=L({onPress(){var p;e.toggle(),(p=a.current)===null||p===void 0||p.focus()},isDisabled:t||n}),{focusableProps:g}=J(i,a),I=S(b,g),R=A(i,{labelable:!0});return ce(a,e.isSelected,e.setSelected),{labelProps:S(V,{onClick:p=>p.preventDefault()}),inputProps:S(R,{"aria-invalid":v||u==="invalid"||void 0,"aria-errormessage":i["aria-errormessage"],"aria-controls":i["aria-controls"],"aria-readonly":n||void 0,onChange:h,disabled:t,...l==null?{}:{value:l},name:o,type:"checkbox",...I}),isSelected:e.isSelected,isPressed:$||y,isDisabled:t,isReadOnly:n,isInvalid:v||u==="invalid"}}function H(i,e,a){let t=U({...i,value:e.isSelected}),{isInvalid:n,validationErrors:l,validationDetails:o}=t.displayValidation,{labelProps:c,inputProps:d,isSelected:r,isPressed:u,isDisabled:v,isReadOnly:h}=he({...i,isInvalid:n},e,a);be(i,t,a);let{isIndeterminate:x,isRequired:f,validationBehavior:b="aria"}=i;s.exports.useEffect(()=>{a.current&&(a.current.indeterminate=!!x)});let{pressProps:$}=L({isDisabled:v||h,onPress(){let{[M]:V}=i,{commitValidation:y}=V||t;y()}});return{labelProps:S(c,$),inputProps:{...d,checked:r,"aria-required":f&&b==="aria"||void 0,required:f&&b==="native"},isSelected:r,isPressed:u,isDisabled:v,isReadOnly:h,isInvalid:n,validationErrors:l,validationDetails:o}}const xe=new WeakMap;function Ve(i,e,a){const t=F({isReadOnly:i.isReadOnly||e.isReadOnly,isSelected:e.isSelected(i.value),onChange($){$?e.addValue(i.value):e.removeValue(i.value),i.onChange&&i.onChange($)}});let{name:n,descriptionId:l,errorMessageId:o,validationBehavior:c}=xe.get(e);var d;c=(d=i.validationBehavior)!==null&&d!==void 0?d:c;let{realtimeValidation:r}=U({...i,value:t.isSelected,name:void 0,validationBehavior:"aria"}),u=s.exports.useRef(E),v=()=>{e.setInvalid(i.value,r.isInvalid?r:u.current)};s.exports.useEffect(v);let h=e.realtimeValidation.isInvalid?e.realtimeValidation:r,x=c==="native"?e.displayValidation:h;var f;let b=H({...i,isReadOnly:i.isReadOnly||e.isReadOnly,isDisabled:i.isDisabled||e.isDisabled,name:i.name||n,isRequired:(f=i.isRequired)!==null&&f!==void 0?f:e.isRequired,validationBehavior:c,[M]:{realtimeValidation:h,displayValidation:x,resetValidation:e.resetValidation,commitValidation:e.commitValidation,updateValidation($){u.current=$,v()}}},t,a);return{...b,inputProps:{...b.inputProps,"aria-describedby":[i["aria-describedby"],e.isInvalid?o:null,l].filter(Boolean).join(" ")||void 0}}}const ye=s.exports.createContext(null),ge=s.exports.createContext(null),Ie=s.exports.forwardRef(function(e,a){let{inputRef:t=null,...n}=e;[e,a]=K(n,a,W);let{validationBehavior:l}=X(ye)||{};var o,c;let d=(c=(o=e.validationBehavior)!==null&&o!==void 0?o:l)!==null&&c!==void 0?c:"native",r=s.exports.useContext(ge),u=ee(s.exports.useMemo(()=>ie(t,e.inputRef!==void 0?e.inputRef:null),[t,e.inputRef])),{labelProps:v,inputProps:h,isSelected:x,isDisabled:f,isReadOnly:b,isPressed:$,isInvalid:V}=r?Ve({...q(e),value:e.value,children:typeof e.children=="function"?!0:e.children},r,u):H({...q(e),children:typeof e.children=="function"?!0:e.children,validationBehavior:d},F(e),u),{isFocused:y,isFocusVisible:g,focusProps:I}=ae(),R=f||b,{hoverProps:p,isHovered:P}=te({...e,isDisabled:R}),C=le({...e,defaultClassName:"react-aria-Checkbox",values:{isSelected:x,isIndeterminate:e.isIndeterminate||!1,isPressed:$,isHovered:P,isFocused:y,isFocusVisible:g,isDisabled:f,isReadOnly:b,isInvalid:V,isRequired:e.isRequired||!1}}),O=A(e);return delete O.id,B.createElement("label",{...S(O,v,p,C),ref:a,slot:e.slot||void 0,"data-selected":x||void 0,"data-indeterminate":e.isIndeterminate||void 0,"data-pressed":$||void 0,"data-hovered":P||void 0,"data-focused":y||void 0,"data-focus-visible":g||void 0,"data-disabled":f||void 0,"data-readonly":b||void 0,"data-invalid":V||void 0,"data-required":e.isRequired||void 0},B.createElement(Y,{elementType:"span"},B.createElement("input",{...S(h,I),ref:u})),C.children)}),Pe=N(Ie)`
  ${re}

  [data-slot="selection"] {
    ${ne}
  }

  &[data-selected] [data-slot="selection"]::before {
    ${de}
  }

  &[data-indeterminate="true"] {
    [data-slot="selection"]::before { 
      content: "";
      position: relative;
      transform: scale(1);
      background-color: ${se.colors.palette.mediumBlue};
      border: none;
      background-image: url('${oe}');
    }
  }
`,Oe=({size:i=1.6,variant:e="primary",bold:a=!1,children:t,...n})=>Q(Pe,{...n,variant:e,checkboxSize:i,bold:a,children:[z("div",{"data-slot":"selection"}),t]});export{Oe as T};
