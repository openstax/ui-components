import{l as A,i as C,j as T,h as _,d as p,$ as N,c as I}from"./useFocusRing.module.2bdc77e5.js";import{r as u,R as P}from"./index.6bca83e6.js";import{a as w}from"./context.module.12b9aea5.js";import{$ as R}from"./useButton.module.6a130ada.js";const L=7e3;let a=null;function x(i,e="assertive",d=L){a?a.announce(i,e,d):(a=new V,(typeof IS_REACT_ACT_ENVIRONMENT=="boolean"?IS_REACT_ACT_ENVIRONMENT:typeof jest<"u")?a.announce(i,e,d):setTimeout(()=>{a!=null&&a.isAttached()&&(a==null||a.announce(i,e,d))},100))}class V{isAttached(){var e;return(e=this.node)===null||e===void 0?void 0:e.isConnected}createLog(e){let d=document.createElement("div");return d.setAttribute("role","log"),d.setAttribute("aria-live",e),d.setAttribute("aria-relevant","additions"),d}destroy(){!this.node||(document.body.removeChild(this.node),this.node=null)}announce(e,d="assertive",l=L){var t,n;if(!this.node)return;let o=document.createElement("div");typeof e=="object"?(o.setAttribute("role","img"),o.setAttribute("aria-labelledby",e["aria-labelledby"])):o.textContent=e,d==="assertive"?(t=this.assertiveLog)===null||t===void 0||t.appendChild(o):(n=this.politeLog)===null||n===void 0||n.appendChild(o),e!==""&&setTimeout(()=>{o.remove()},l)}clear(e){!this.node||((!e||e==="assertive")&&this.assertiveLog&&(this.assertiveLog.innerHTML=""),(!e||e==="polite")&&this.politeLog&&(this.politeLog.innerHTML=""))}constructor(){this.node=null,this.assertiveLog=null,this.politeLog=null,typeof document<"u"&&(this.node=document.createElement("div"),this.node.dataset.liveAnnouncer="true",Object.assign(this.node.style,{border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"}),this.assertiveLog=this.createLog("assertive"),this.node.appendChild(this.assertiveLog),this.politeLog=this.createLog("polite"),this.node.appendChild(this.politeLog),document.body.prepend(this.node))}}const D=u.exports.createContext(null),M=new Set(["form","formAction","formEncType","formMethod","formNoValidate","formTarget","name","value"]),F=u.exports.createContext({}),U=w(function(e,d){[e,d]=A(e,d,F),e=H(e);let l=e,{isPending:t}=l,{buttonProps:n,isPressed:o}=R(e,d),{focusProps:y,isFocused:r,isFocusVisible:$}=C(e),{hoverProps:E,isHovered:h}=T({...e,isDisabled:e.isDisabled||t}),v={isHovered:h,isPressed:(l.isPressed||o)&&!t,isFocused:r,isFocusVisible:$,isDisabled:e.isDisabled||!1,isPending:t!=null?t:!1},g=_({...e,values:v,defaultClassName:"react-aria-Button"}),c=p(n.id),f=p(),s=n["aria-labelledby"];t&&(s?s=`${s} ${f}`:n["aria-label"]&&(s=`${c} ${f}`));let b=u.exports.useRef(t);return u.exports.useEffect(()=>{let m={"aria-labelledby":s||c};(!b.current&&r&&t||b.current&&r&&!t)&&x(m,"assertive"),b.current=t},[t,r,s,c]),P.createElement("button",{...N(e,{propNames:M}),...I(n,y,E),...g,type:n.type==="submit"&&t?"button":n.type,id:c,ref:d,"aria-labelledby":s,slot:e.slot||void 0,"aria-disabled":t?"true":n["aria-disabled"],"data-disabled":e.isDisabled||void 0,"data-pressed":v.isPressed||void 0,"data-hovered":h||void 0,"data-focused":r||void 0,"data-pending":t||void 0,"data-focus-visible":$||void 0},P.createElement(D.Provider,{value:{id:f}},g.children))});function H(i){return i.isPending&&(i.onPress=void 0,i.onPressStart=void 0,i.onPressEnd=void 0,i.onPressChange=void 0,i.onPressUp=void 0,i.onKeyDown=void 0,i.onKeyUp=void 0,i.onClick=void 0,i.href=void 0),i}export{U as $,F as a,x as b};
