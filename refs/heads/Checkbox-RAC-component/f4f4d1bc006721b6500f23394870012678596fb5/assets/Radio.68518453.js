import{r as d,R as O,s as E,a as $,j as k}from"./index.56241f9c.js";import{c as v}from"./theme.214696be.js";import{$ as z,a as Y,b as G,c as q,C as J}from"./Tooltip.149f3797.js";import{$ as x,a as Q,b as X}from"./focusSafely.module.464e09cf.js";import{W as Z}from"./useFocusRing.module.45dfdaf4.js";function ee(e){const t=d.exports.useRef(null);return x(()=>{t.current=e},[e]),d.exports.useCallback((...r)=>{const n=t.current;return n==null?void 0:n(...r)},[])}let F=new Map;function te(e,t){if(e===t)return e;let r=F.get(e);if(r)return r.forEach(o=>o(t)),t;let n=F.get(t);return n?(n.forEach(o=>o(e)),e):t}function re(...e){return(...t)=>{for(let r of e)typeof r=="function"&&r(...t)}}function T(...e){let t={...e[0]};for(let r=1;r<e.length;r++){let n=e[r];for(let o in n){let i=t[o],a=n[o];typeof i=="function"&&typeof a=="function"&&o[0]==="o"&&o[1]==="n"&&o.charCodeAt(2)>=65&&o.charCodeAt(2)<=90?t[o]=re(i,a):(o==="className"||o==="UNSAFE_className")&&typeof i=="string"&&typeof a=="string"?t[o]=Z(i,a):o==="id"&&i&&a?t.id=te(i,a):t[o]=a!==void 0?a:i}}return t}function ne(e,t){x(()=>{if(e&&e.ref&&t)return e.ref.current=t.current,()=>{e.ref&&(e.ref.current=null)}})}class oe{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(t,r){this.nativeEvent=r,this.target=r.target,this.currentTarget=r.currentTarget,this.relatedTarget=r.relatedTarget,this.bubbles=r.bubbles,this.cancelable=r.cancelable,this.defaultPrevented=r.defaultPrevented,this.eventPhase=r.eventPhase,this.isTrusted=r.isTrusted,this.timeStamp=r.timeStamp,this.type=t}}function ae(e){let t=d.exports.useRef({isFocused:!1,observer:null});x(()=>{const n=t.current;return()=>{n.observer&&(n.observer.disconnect(),n.observer=null)}},[]);let r=ee(n=>{e==null||e(n)});return d.exports.useCallback(n=>{if(n.target instanceof HTMLButtonElement||n.target instanceof HTMLInputElement||n.target instanceof HTMLTextAreaElement||n.target instanceof HTMLSelectElement){t.current.isFocused=!0;let o=n.target,i=a=>{t.current.isFocused=!1,o.disabled&&r(new oe("blur",a)),t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};o.addEventListener("focusout",i,{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&o.disabled){var a;(a=t.current.observer)===null||a===void 0||a.disconnect();let s=o===document.activeElement?null:document.activeElement;o.dispatchEvent(new FocusEvent("blur",{relatedTarget:s})),o.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:s}))}}),t.current.observer.observe(o,{attributes:!0,attributeFilter:["disabled"]})}},[r])}function ie(e){let{isDisabled:t,onFocus:r,onBlur:n,onFocusChange:o}=e;const i=d.exports.useCallback(u=>{if(u.target===u.currentTarget)return n&&n(u),o&&o(!1),!0},[n,o]),a=ae(i),s=d.exports.useCallback(u=>{const b=Q(u.target);u.target===u.currentTarget&&b.activeElement===u.target&&(r&&r(u),o&&o(!0),a(u))},[o,r,a]);return{focusProps:{onFocus:!t&&(r||o||n)?s:void 0,onBlur:!t&&(n||o)?i:void 0}}}function S(e){if(!e)return;let t=!0;return r=>{let n={...r,preventDefault(){r.preventDefault()},isDefaultPrevented(){return r.isDefaultPrevented()},stopPropagation(){t?console.error("stopPropagation is now the default behavior for events in React Spectrum. You can use continuePropagation() to revert this behavior."):t=!0},continuePropagation(){t=!1},isPropagationStopped(){return t}};e(n),t&&r.stopPropagation()}}function se(e){return{keyboardProps:e.isDisabled?{}:{onKeyDown:S(e.onKeyDown),onKeyUp:S(e.onKeyUp)}}}let ue=O.createContext(null);function ce(e){let t=d.exports.useContext(ue)||{};ne(t,e);let{ref:r,...n}=t;return n}function de(e,t){let{focusProps:r}=ie(e),{keyboardProps:n}=se(e),o=T(r,n),i=ce(t),a=e.isDisabled?{}:i,s=d.exports.useRef(e.autoFocus);return d.exports.useEffect(()=>{s.current&&t.current&&X(t.current),s.current=!1},[t]),{focusableProps:T({...o,tabIndex:e.excludeFromTabOrder&&!e.isDisabled?-1:void 0},a)}}const h=e=>{var t;return(t=e==null?void 0:e.ownerDocument)!==null&&t!==void 0?t:document},w=e=>e&&"window"in e&&e.window===e?e:h(e).defaultView||window;function fe(e){var t;return typeof window>"u"||window.navigator==null?!1:((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands.some(r=>e.test(r.brand)))||e.test(window.navigator.userAgent)}function le(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function K(e){let t=null;return()=>(t==null&&(t=e()),t)}const be=K(function(){return le(/^Mac/i)}),pe=K(function(){return fe(/Android/i)});function $e(e){return e.mozInputSource===0&&e.isTrusted?!0:pe()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}let l=null,ve=new Set,g=new Map,f=!1,y=!1;function P(e,t){for(let r of ve)r(e,t)}function ge(e){return!(e.metaKey||!be()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function m(e){f=!0,ge(e)&&(l="keyboard",P("keyboard",e))}function c(e){l="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(f=!0,P("pointer",e))}function R(e){$e(e)&&(f=!0,l="virtual")}function j(e){e.target===window||e.target===document||(!f&&!y&&(l="virtual",P("virtual",e)),f=!1,y=!1)}function A(){f=!1,y=!0}function C(e){if(typeof window>"u"||g.get(w(e)))return;const t=w(e),r=h(e);let n=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){f=!0,n.apply(this,arguments)},r.addEventListener("keydown",m,!0),r.addEventListener("keyup",m,!0),r.addEventListener("click",R,!0),t.addEventListener("focus",j,!0),t.addEventListener("blur",A,!1),typeof PointerEvent<"u"?(r.addEventListener("pointerdown",c,!0),r.addEventListener("pointermove",c,!0),r.addEventListener("pointerup",c,!0)):(r.addEventListener("mousedown",c,!0),r.addEventListener("mousemove",c,!0),r.addEventListener("mouseup",c,!0)),t.addEventListener("beforeunload",()=>{B(e)},{once:!0}),g.set(t,{focus:n})}const B=(e,t)=>{const r=w(e),n=h(e);t&&n.removeEventListener("DOMContentLoaded",t),g.has(r)&&(r.HTMLElement.prototype.focus=g.get(r).focus,n.removeEventListener("keydown",m,!0),n.removeEventListener("keyup",m,!0),n.removeEventListener("click",R,!0),r.removeEventListener("focus",j,!0),r.removeEventListener("blur",A,!1),typeof PointerEvent<"u"?(n.removeEventListener("pointerdown",c,!0),n.removeEventListener("pointermove",c,!0),n.removeEventListener("pointerup",c,!0)):(n.removeEventListener("mousedown",c,!0),n.removeEventListener("mousemove",c,!0),n.removeEventListener("mouseup",c,!0)),g.delete(r))};function me(e){const t=h(e);let r;return t.readyState!=="loading"?C(e):(r=()=>{C(e)},t.addEventListener("DOMContentLoaded",r)),()=>B(e,r)}typeof document<"u"&&me();function he(){return l!=="pointer"}function we(){return l}function ye(e,t,r){let{isDisabled:n,trigger:o}=e,i=z(),a=d.exports.useRef(!1),s=d.exports.useRef(!1),u=()=>{(a.current||s.current)&&t.open(s.current)},b=p=>{!a.current&&!s.current&&t.close(p)};d.exports.useEffect(()=>{let p=D=>{r&&r.current&&D.key==="Escape"&&(D.stopPropagation(),t.close(!0))};if(t.isOpen)return document.addEventListener("keydown",p,!0),()=>{document.removeEventListener("keydown",p,!0)}},[r,t]);let I=()=>{o!=="focus"&&(we()==="pointer"?a.current=!0:a.current=!1,u())},W=()=>{o!=="focus"&&(s.current=!1,a.current=!1,b())},L=()=>{s.current=!1,a.current=!1,b(!0)},U=()=>{he()&&(s.current=!0,u())},V=()=>{s.current=!1,a.current=!1,b(!0)},{hoverProps:_}=Y({isDisabled:n,onHoverStart:I,onHoverEnd:W}),{focusableProps:N}=de({isDisabled:n,onFocus:U,onBlur:V},r);return{triggerProps:{"aria-describedby":t.isOpen?i:void 0,...G(N,_,{onPointerDown:L,onKeyDown:L})},tooltipProps:{id:i}}}const H=E.label`
  font-size: 1.6rem;
  display: flex;
  align-items: center;
  color: ${e=>e.isDisabled?v.palette.pale:"inherit"};
  width: 100%;
  position: relative;
`,M=E.input`
  appearance: none;
  /* For iOS < 15 to remove gradient background */
  background-color: ${v.palette.white};
  opacity: ${e=>e.isDisabled?"0.4":"1"};
  font: inherit;
  color: ${v.palette.pale};
  width: 2rem;
  height: 2rem;
  border: 1px solid ${v.palette.neutralThin};
  border-radius: 50%;
  transform: translateY(-0.075em);
  margin: 0 1.6rem 0 0;
  display: grid;
  place-content: center;

  &::before {
    content: "";
    width: 1.6rem;
    height: 1.6rem;
    border-radius: 50%;
    opacity: 0;
    box-shadow: inset 1em 1em ${v.palette.mediumBlue};
  }

  &:checked::before {
    opacity: ${e=>e.isDisabled?0:1};
  }
`,Ee=E.div`
  display: inline-block;
`,Fe=({children:e,disabled:t,...r})=>{const n=q({delay:0}),o=O.useRef(null),{triggerProps:i,tooltipProps:a}=ye({delay:0},n,o);return r.tooltipText?$("div",{children:$(Ee,{children:k(H,{ref:o,isDisabled:t,"aria-disabled":t,...i,children:[$(M,{type:"radio",onFocus:()=>n.open(),isDisabled:t,"aria-disabled":t,...r}),e,n.isOpen&&$(J,{state:n,...a,placement:"right",children:r.tooltipText})]})})}):k(H,{isDisabled:t,"aria-disabled":t,children:[$(M,{type:"radio",isDisabled:t,"aria-disabled":t,...r}),e]})};export{Fe as R};
