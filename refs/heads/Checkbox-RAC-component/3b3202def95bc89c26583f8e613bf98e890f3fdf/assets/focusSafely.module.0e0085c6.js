import{R as x}from"./index.f5f3f699.js";const z=typeof document<"u"?x.useLayoutEffect:()=>{},f=e=>{var t;return(t=e==null?void 0:e.ownerDocument)!==null&&t!==void 0?t:document},$=e=>e&&"window"in e&&e.window===e?e:f(e).defaultView||window;function E(e){if(M())e.focus({preventScroll:!0});else{let t=D(e);e.focus(),C(t)}}let s=null;function M(){if(s==null){s=!1;try{document.createElement("div").focus({get preventScroll(){return s=!0,!0}})}catch{}}return s}function D(e){let t=e.parentNode,r=[],n=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==n;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&r.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return n instanceof HTMLElement&&r.push({element:n,scrollTop:n.scrollTop,scrollLeft:n.scrollLeft}),r}function C(e){for(let{element:t,scrollTop:r,scrollLeft:n}of e)t.scrollTop=r,t.scrollLeft=n}function y(e){var t;return typeof window>"u"||window.navigator==null?!1:((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands.some(r=>e.test(r.brand)))||e.test(window.navigator.userAgent)}function H(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function p(e){let t=null;return()=>(t==null&&(t=e()),t)}const A=p(function(){return H(/^Mac/i)}),B=p(function(){return y(/Chrome/i)}),O=p(function(){return y(/Android/i)});let c=new Map,v=new Set;function w(){if(typeof window>"u")return;function e(n){return"propertyName"in n}let t=n=>{if(!e(n)||!n.target)return;let a=c.get(n.target);a||(a=new Set,c.set(n.target,a),n.target.addEventListener("transitioncancel",r,{once:!0})),a.add(n.propertyName)},r=n=>{if(!e(n)||!n.target)return;let a=c.get(n.target);if(!!a&&(a.delete(n.propertyName),a.size===0&&(n.target.removeEventListener("transitioncancel",r),c.delete(n.target)),c.size===0)){for(let S of v)S();v.clear()}};document.body.addEventListener("transitionrun",t),document.body.addEventListener("transitionend",r)}typeof document<"u"&&(document.readyState!=="loading"?w():document.addEventListener("DOMContentLoaded",w));function _(e){requestAnimationFrame(()=>{c.size===0?e():v.add(e)})}function P(e){return e.mozInputSource===0&&e.isTrusted?!0:O()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}let u=null,F=new Set,d=new Map,i=!1,b=!1;function m(e,t){for(let r of F)r(e,t)}function j(e){return!(e.metaKey||!A()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function l(e){i=!0,j(e)&&(u="keyboard",m("keyboard",e))}function o(e){u="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(i=!0,m("pointer",e))}function g(e){P(e)&&(i=!0,u="virtual")}function h(e){e.target===window||e.target===document||(!i&&!b&&(u="virtual",m("virtual",e)),i=!1,b=!1)}function T(){i=!1,b=!0}function L(e){if(typeof window>"u"||d.get($(e)))return;const t=$(e),r=f(e);let n=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){i=!0,n.apply(this,arguments)},r.addEventListener("keydown",l,!0),r.addEventListener("keyup",l,!0),r.addEventListener("click",g,!0),t.addEventListener("focus",h,!0),t.addEventListener("blur",T,!1),typeof PointerEvent<"u"?(r.addEventListener("pointerdown",o,!0),r.addEventListener("pointermove",o,!0),r.addEventListener("pointerup",o,!0)):(r.addEventListener("mousedown",o,!0),r.addEventListener("mousemove",o,!0),r.addEventListener("mouseup",o,!0)),t.addEventListener("beforeunload",()=>{k(e)},{once:!0}),d.set(t,{focus:n})}const k=(e,t)=>{const r=$(e),n=f(e);t&&n.removeEventListener("DOMContentLoaded",t),d.has(r)&&(r.HTMLElement.prototype.focus=d.get(r).focus,n.removeEventListener("keydown",l,!0),n.removeEventListener("keyup",l,!0),n.removeEventListener("click",g,!0),r.removeEventListener("focus",h,!0),r.removeEventListener("blur",T,!1),typeof PointerEvent<"u"?(n.removeEventListener("pointerdown",o,!0),n.removeEventListener("pointermove",o,!0),n.removeEventListener("pointerup",o,!0)):(n.removeEventListener("mousedown",o,!0),n.removeEventListener("mousemove",o,!0),n.removeEventListener("mouseup",o,!0)),d.delete(r))};function K(e){const t=f(e);let r;return t.readyState!=="loading"?L(e):(r=()=>{L(e)},t.addEventListener("DOMContentLoaded",r)),()=>k(e,r)}typeof document<"u"&&K();function N(){return u}function R(e){const t=f(e);if(N()==="virtual"){let r=t.activeElement;_(()=>{t.activeElement===r&&e.isConnected&&E(e)})}else E(e)}export{z as $,f as a,R as b,$ as c,N as d,O as e,B as f};
