import{r as l,R as I,s as k,a as v,j as M}from"./index.2d4485a1.js";import{c as m}from"./theme.7ac48908.js";import{$ as F,a as E,b as L,c as w,d as X,e as P,f as Z,g as ee,h as te,C as re}from"./Tooltip.85b96812.js";function ne(e){const t=l.exports.useRef(null);return F(()=>{t.current=e},[e]),l.exports.useCallback((...n)=>{const r=t.current;return r==null?void 0:r(...n)},[])}function O(e){if(oe())e.focus({preventScroll:!0});else{let t=ae(e);e.focus(),ie(t)}}let y=null;function oe(){if(y==null){y=!1;try{document.createElement("div").focus({get preventScroll(){return y=!0,!0}})}catch{}}return y}function ae(e){let t=e.parentNode,n=[],r=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==r;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&n.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}function ie(e){for(let{element:t,scrollTop:n,scrollLeft:r}of e)t.scrollTop=n,t.scrollLeft=r}function ce(e){var t;return typeof window>"u"||window.navigator==null?!1:((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands.some(n=>e.test(n.brand)))||e.test(window.navigator.userAgent)}function se(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function W(e){let t=null;return()=>(t==null&&(t=e()),t)}const le=W(function(){return se(/^Mac/i)}),ue=W(function(){return ce(/Android/i)});let u=new Map,D=new Set;function B(){if(typeof window>"u")return;function e(r){return"propertyName"in r}let t=r=>{if(!e(r)||!r.target)return;let o=u.get(r.target);o||(o=new Set,u.set(r.target,o),r.target.addEventListener("transitioncancel",n,{once:!0})),o.add(r.propertyName)},n=r=>{if(!e(r)||!r.target)return;let o=u.get(r.target);if(!!o&&(o.delete(r.propertyName),o.size===0&&(r.target.removeEventListener("transitioncancel",n),u.delete(r.target)),u.size===0)){for(let s of D)s();D.clear()}};document.body.addEventListener("transitionrun",t),document.body.addEventListener("transitionend",n)}typeof document<"u"&&(document.readyState!=="loading"?B():document.addEventListener("DOMContentLoaded",B));function de(){for(const[e]of u)"isConnected"in e&&!e.isConnected&&u.delete(e)}function fe(e){requestAnimationFrame(()=>{de(),u.size===0?e():D.add(e)})}function be(e,t){F(()=>{if(e&&e.ref&&t)return e.ref.current=t.current,()=>{e.ref&&(e.ref.current=null)}})}function pe(e){return e.mozInputSource===0&&e.isTrusted?!0:ue()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function $e(e){let t=e;return t.nativeEvent=e,t.isDefaultPrevented=()=>t.defaultPrevented,t.isPropagationStopped=()=>t.cancelBubble,t.persist=()=>{},t}function ve(e){let t=l.exports.useRef({isFocused:!1,observer:null});F(()=>{const r=t.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let n=ne(r=>{e==null||e(r)});return l.exports.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){t.current.isFocused=!0;let o=r.target,s=a=>{if(t.current.isFocused=!1,o.disabled){let i=$e(a);n(i)}t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};o.addEventListener("focusout",s,{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&o.disabled){var a;(a=t.current.observer)===null||a===void 0||a.disconnect();let i=o===document.activeElement?null:document.activeElement;o.dispatchEvent(new FocusEvent("blur",{relatedTarget:i})),o.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:i}))}}),t.current.observer.observe(o,{attributes:!0,attributeFilter:["disabled"]})}},[n])}let me=!1,p=null,ge=new Set,g=new Map,d=!1,T=!1;function S(e,t){for(let n of ge)n(e,t)}function Ee(e){return!(e.metaKey||!le()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function h(e){d=!0,Ee(e)&&(p="keyboard",S("keyboard",e))}function b(e){p="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(d=!0,S("pointer",e))}function z(e){pe(e)&&(d=!0,p="virtual")}function N(e){e.target===window||e.target===document||me||!e.isTrusted||(!d&&!T&&(p="virtual",S("virtual",e)),d=!1,T=!1)}function U(){d=!1,T=!0}function K(e){if(typeof window>"u"||typeof document>"u"||g.get(L(e)))return;const t=L(e),n=E(e);let r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){d=!0,r.apply(this,arguments)},n.addEventListener("keydown",h,!0),n.addEventListener("keyup",h,!0),n.addEventListener("click",z,!0),t.addEventListener("focus",N,!0),t.addEventListener("blur",U,!1),typeof PointerEvent<"u"&&(n.addEventListener("pointerdown",b,!0),n.addEventListener("pointermove",b,!0),n.addEventListener("pointerup",b,!0)),t.addEventListener("beforeunload",()=>{V(e)},{once:!0}),g.set(t,{focus:r})}const V=(e,t)=>{const n=L(e),r=E(e);t&&r.removeEventListener("DOMContentLoaded",t),g.has(n)&&(n.HTMLElement.prototype.focus=g.get(n).focus,r.removeEventListener("keydown",h,!0),r.removeEventListener("keyup",h,!0),r.removeEventListener("click",z,!0),n.removeEventListener("focus",N,!0),n.removeEventListener("blur",U,!1),typeof PointerEvent<"u"&&(r.removeEventListener("pointerdown",b,!0),r.removeEventListener("pointermove",b,!0),r.removeEventListener("pointerup",b,!0)),g.delete(n))};function ye(e){const t=E(e);let n;return t.readyState!=="loading"?K(e):(n=()=>{K(e)},t.addEventListener("DOMContentLoaded",n)),()=>V(e,n)}typeof document<"u"&&ye();function we(){return p!=="pointer"}function G(){return p}function he(e){const t=E(e),n=w(t);if(G()==="virtual"){let r=n;fe(()=>{w(t)===r&&e.isConnected&&O(e)})}else O(e)}function xe(e){let{isDisabled:t,onFocus:n,onBlur:r,onFocusChange:o}=e;const s=l.exports.useCallback(c=>{if(c.target===c.currentTarget)return r&&r(c),o&&o(!1),!0},[r,o]),a=ve(s),i=l.exports.useCallback(c=>{const f=E(c.target),x=f?w(f):w();c.target===c.currentTarget&&x===X(c.nativeEvent)&&(n&&n(c),o&&o(!0),a(c))},[o,n,a]);return{focusProps:{onFocus:!t&&(n||o||r)?i:void 0,onBlur:!t&&(r||o)?s:void 0}}}function A(e){if(!e)return;let t=!0;return n=>{let r={...n,preventDefault(){n.preventDefault()},isDefaultPrevented(){return n.isDefaultPrevented()},stopPropagation(){t=!0},continuePropagation(){t=!1},isPropagationStopped(){return t}};e(r),t&&n.stopPropagation()}}function Le(e){return{keyboardProps:e.isDisabled?{}:{onKeyDown:A(e.onKeyDown),onKeyUp:A(e.onKeyUp)}}}let Pe=I.createContext(null);function De(e){let t=l.exports.useContext(Pe)||{};be(t,e);let{ref:n,...r}=t;return r}function Te(e,t){let{focusProps:n}=xe(e),{keyboardProps:r}=Le(e),o=P(n,r),s=De(t),a=e.isDisabled?{}:s,i=l.exports.useRef(e.autoFocus);l.exports.useEffect(()=>{i.current&&t.current&&he(t.current),i.current=!1},[t]);let c=e.excludeFromTabOrder?-1:0;return e.isDisabled&&(c=void 0),{focusableProps:P({...o,tabIndex:c},a)}}function ke(e,t,n){let{isDisabled:r,trigger:o}=e,s=Z(),a=l.exports.useRef(!1),i=l.exports.useRef(!1),c=()=>{(a.current||i.current)&&t.open(i.current)},f=$=>{!a.current&&!i.current&&t.close($)};l.exports.useEffect(()=>{let $=H=>{n&&n.current&&H.key==="Escape"&&(H.stopPropagation(),t.close(!0))};if(t.isOpen)return document.addEventListener("keydown",$,!0),()=>{document.removeEventListener("keydown",$,!0)}},[n,t]);let x=()=>{o!=="focus"&&(G()==="pointer"?a.current=!0:a.current=!1,c())},Y=()=>{o!=="focus"&&(i.current=!1,a.current=!1,f())},C=()=>{i.current=!1,a.current=!1,f(!0)},q=()=>{we()&&(i.current=!0,c())},_=()=>{i.current=!1,a.current=!1,f(!0)},{hoverProps:J}=ee({isDisabled:r,onHoverStart:x,onHoverEnd:Y}),{focusableProps:Q}=Te({isDisabled:r,onFocus:q,onBlur:_},n);return{triggerProps:{"aria-describedby":t.isOpen?s:void 0,...P(Q,J,{onPointerDown:C,onKeyDown:C,tabIndex:void 0})},tooltipProps:{id:s}}}const R=k.label`
  font-size: 1.6rem;
  display: flex;
  align-items: center;
  color: ${e=>e.isDisabled?m.palette.pale:"inherit"};
  width: 100%;
  position: relative;
`,j=k.input`
  appearance: none;
  /* For iOS < 15 to remove gradient background */
  background-color: ${m.palette.white};
  opacity: ${e=>e.isDisabled?"0.4":"1"};
  font: inherit;
  color: ${m.palette.pale};
  width: 2rem;
  height: 2rem;
  border: 1px solid ${m.palette.neutralThin};
  border-radius: 50%;
  transform: translateY(-0.075em);
  margin: 0 1.6rem 0 0;
  display: grid;
  place-content: center;

  &::before {
    content: "";
    width: 1.6rem;
    height: 1.6rem;
    border-radius: 50%;
    opacity: 0;
    box-shadow: inset 1em 1em ${m.palette.mediumBlue};
  }

  &:checked::before {
    opacity: ${e=>e.isDisabled?0:1};
  }
`,Fe=k.div`
  display: inline-block;
`,Me=({children:e,disabled:t,...n})=>{const r=te({delay:0}),o=I.useRef(null),{triggerProps:s,tooltipProps:a}=ke({delay:0},r,o);return n.tooltipText?v("div",{children:v(Fe,{children:M(R,{ref:o,isDisabled:t,"aria-disabled":t,...s,children:[v(j,{type:"radio",onFocus:()=>r.open(),isDisabled:t,"aria-disabled":t,...n}),e,r.isOpen&&v(re,{state:r,...a,placement:"right",children:n.tooltipText})]})})}):M(R,{isDisabled:t,"aria-disabled":t,children:[v(j,{type:"radio",isDisabled:t,"aria-disabled":t,...n}),e]})};export{Me as R};
